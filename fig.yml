db:
  image: postgres

app:
  build: .
  expose:
    - "3000"
  links:
    - db:pw-db

webconf:
  image: busybox
  volumes:
    - lib/nginx/ssl-certs/:/root/ssl-certs:ro
    - lib/nginx/nginx.conf:/etc/nginx/nginx.conf:ro
  # command: echo "Data-only container for the webserver conf files."
  command: true &> /dev/null

web:
  image: nginx
  ports:
    - "80:80"
    - "443:443"
  links:
    - app:pw-app
  volumes_from:
    - webconf
  volumes:
    - /var/log/nginx

logs:
  image: busybox
  volumes_from:
    - web
  # command: echo "Data-only container for the logs."
  command: true &> /dev/null
